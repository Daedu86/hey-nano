<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hey Mic Admin</title>
    <link rel="stylesheet" href="admin_popup.css" />
  </head>
  <body>
    <div class="container">
      <h1 class="sr-only">Hey Mic Admin</h1>
      <div id="grid" class="grid" aria-label="8x8 layout">
        <!-- Hey Mic Admin feature -->
        <section class="tile" id="tile-admin" draggable="true" data-colspan="1">
          <div class="tile-head">Hey Mic Admin</div>
          <div class="tile-body">
            <div class="controls">
              <button id="toggleMic" class="btn">Enable Mic</button>
              <span id="micBadge" class="status-badge off">OFF</span>
              <div class="hint">Shortcut: Alt+Shift+M – change in chrome://extensions/shortcuts</div>
            </div>
          </div>
        </section>

        <!-- Open Tab -->
        <section class="tile" id="tile-open" draggable="true" data-colspan="1">
          <div class="tile-head">Open Tab</div>
          <div class="tile-body">
            <form id="openForm">
              <input id="urlInput" type="text" placeholder="https://example.com or example.com" />
              <button type="submit" class="btn">Open</button>
            </form>
          </div>
        </section>

        <!-- List Tabs -->
        <section class="tile" id="tile-list" draggable="true" data-colspan="1">
          <div class="tile-head">List Tabs</div>
          <div class="tile-body">
            <button id="listTabs" class="btn">List</button>
            <div id="tabsOut" class="tabs-list"></div>
          </div>
        </section>

        <!-- Global Off feature -->
        <section class="tile" id="tile-global-off" draggable="true" data-colspan="1">
          <div class="tile-head">Global Off</div>
          <div class="tile-body">
            <button id="disableAll" class="btn btn-secondary">Turn off Hey Mic on all tabs</button>
          </div>
        </section>

        <!-- Assistant Behaviour -->
        <section class="tile" id="tile-assistant" draggable="true" data-colspan="1">
          <div class="tile-head">Assistant Behaviour</div>
          <div class="tile-body">
            <div class="subhead">System Prompt</div>
            <pre id="sysPrompt" class="mono"></pre>
          </div>
        </section>

        <!-- Supported Voice Commands -->
        <section class="tile" id="tile-commands" draggable="true" data-colspan="1">
          <div class="tile-head">Supported Voice Commands</div>
          <div class="tile-body">
            <table id="cmdTable" class="cmd-table" aria-label="Supported Voice Commands">
              <thead>
                <tr>
                  <th>Action</th>
                  <th>Triggers</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- HTML/DOM LAYOUT (Widget #7) -->
        <section class="tile" id="tile-html-layout" draggable="true" data-colspan="1">
          <div class="tile-head">Highlight HTML/DOM Layout</div>
          <div class="tile-body">
            <div class="controls" style="justify-content: space-between; align-items: center;">
              <div>
                <button id="htmlDomEnable" class="btn">Enable</button>
                <button id="htmlDomDisable" class="btn btn-secondary">Disable</button>
              </div>
              <span id="htmlDomBadge" class="status-badge off">OFF</span>
            </div>
            <div class="subhead" style="margin-top:8px;">Target Tab</div>
            <div id="htmlDomTarget" class="mono" style="max-height:60px; overflow:auto;">Detecting…</div>
            <div style="margin-top:6px; display:flex; gap:8px;">
              <button id="htmlDomRefresh" class="btn">Refresh Target</button>
            </div>
          </div>
        </section>

        <!-- Surprise Me HTML (Widget #8) -->
        <section class="tile" id="tile-surprise-html" draggable="true" data-colspan="1">
          <div class="tile-head">Surprise me HTML</div>
          <div class="tile-body">
            <div class="controls" style="justify-content: space-between; align-items: center;">
              <div>
                <button id="surpriseEnable" class="btn">Shuffle Layout</button>
                <button id="surpriseDisable" class="btn btn-secondary">Disable</button>
                <button id="surpriseAsk" class="btn" title="Ask the AI for feedback on this layout">Ask LLM</button>
                <button id="surpriseImprove" class="btn" title="Apply AI layout improvements (CSS-only)">Improve HTML</button>
                <button id="surpriseRevertImprove" class="btn btn-secondary" title="Revert AI layout improvements">Revert</button>
              </div>
              <span id="surpriseBadge" class="status-badge off">OFF</span>
            </div>
          </div>
        </section>
      </div>
    </div>
    <script src="admin_popup.js"></script>
  </body>
  </html>
